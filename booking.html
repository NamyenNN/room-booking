<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="preconnect" href="https://script.google.com" crossorigin>
<link rel="dns-prefetch" href="https://script.google.com">
<link rel="preconnect" href="https://static.line-scdn.net" crossorigin>
<link rel="dns-prefetch" href="https://static.line-scdn.net">
<title>จองห้องประชุม</title>
<link rel="icon" type="image/png" href="https://namyennn.github.io/room-booking/LOGOCS.png?v=1">
<style>
  body{font-family:system-ui,Segoe UI,Arial;padding:16px;max-width:720px;margin:auto;background:#fafafa}
  fieldset{border:1px solid #ddd;padding:12px;margin-bottom:16px;border-radius:12px;background:#fff}
  label{display:block;margin:6px 0 4px}
  input,select,button,textarea{width:100%;padding:10px;border:1px solid #ccc;border-radius:10px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .hint{font-size:12px;color:#666}
  details{margin-top:14px}
  pre{white-space:pre-wrap}

  /* Brand (โลโก้มุมซ้าย) */
  .brand{display:flex;align-items:center;gap:10px;margin-bottom:12px}
  .brand img{height:50px;width:auto;display:block}
  .brand h1{margin:0;font-size:28px;line-height:1.1}

  /* Popup */
  #popup { position: fixed; inset: 0; display: none; }
  #popup.show { display: block; }
  #popup-backdrop{ position: absolute; inset:0; background: rgba(0,0,0,.35); }
  #popup-card{
    position: absolute; left:50%; top:50%; transform: translate(-50%,-50%);
    background:#fff; border-radius:14px; padding:18px; width:min(360px,90vw);
    box-shadow: 0 10px 30px rgba(0,0,0,.2); border:1px solid #eee;
  }
  #popup-card h3{ margin:0 0 8px }
  #popup-card p{ margin:0 0 14px; color:#444 }
  #popup-card button{
    width:100%; padding:10px 14px; border:1px solid #ccc;border-radius:10px;cursor:pointer;
    background:#f6f6f6;
  }

  /* Dashboard */
  .dash{margin-top:20px}
  .dash h2{margin:0 0 10px}
  .grid4{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  @media (min-width:900px){.grid4{grid-template-columns:repeat(4,1fr)}}
  .card{background:#fff;border:1px solid #eee;border-radius:12px;padding:12px}
  .card h3{margin:0 0 6px;font-size:16px}
  .card .count{font-size:12px;color:#666;margin-bottom:8px}
  .item{font-size:13px;border-top:1px dashed #eee;padding:6px 0}
  .muted{color:#666;font-size:12px}

  /* --- Compact time inputs --- */
  .time-row {
    display: flex;
    justify-content: space-between;
    gap: 12px;
  }
  .time-group {
    display: flex;
    align-items: center;
    gap: 6px;
    flex: 1;
  }
  .time-group label {
    flex: 0 0 auto;
    margin: 0;
  }
  #start,
  #end {
    width: 90px;
    padding: 6px;
    font-size: 14px;
  }
</style>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>

<!-- โลโก้มุมซ้าย + หัวข้อ -->
<header class="brand">
  <a href="booking.html" aria-label="หน้าแรกการจอง">
    <img src="https://namyennn.github.io/room-booking/LOGOCS.png?v=1" alt="โลโก้ CS">
  </a>
  <h1>จองห้องประชุม</h1>
</header>

<fieldset>
  <legend>เลือกห้องและวันเวลา</legend>
  <label>ห้อง</label>
  <select id="room"><option value="">(กำลังโหลด...)</option></select>
  <div class="row">
    <div><label>วันที่</label><input type="date" id="date"></div>
  </div>

  <!-- Compact time inputs -->
  <div class="time-row">
    <div class="time-group">
      <label>เวลาเริ่ม</label>
      <input type="time" id="start">
    </div>
    <div class="time-group">
      <label>เวลาสิ้นสุด</label>
      <input type="time" id="end">
    </div>
  </div>
</fieldset>

<!-- Dashboard -->
<section id="dash" class="dash">
  <h2>รายการที่จองแล้ว (ตามห้อง/วันที่เลือก)</h2>
  <div class="grid4">
    <div class="card">
      <h3>เช้า (06:00–11:59)</h3><div id="c-morning" class="count">0 รายการ</div><div id="l-morning" class="muted">— ว่าง —</div>
    </div>
    <div class="card">
      <h3>เที่ยง–บ่ายต้น (12:00–14:59)</h3><div id="c-noon" class="count">0 รายการ</div><div id="l-noon" class="muted">— ว่าง —</div>
    </div>
    <div class="card">
      <h3>บ่าย–เย็น (15:00–18:59)</h3><div id="c-evening" class="count">0 รายการ</div><div id="l-evening" class="muted">— ว่าง —</div>
    </div>
    <div class="card">
      <h3>ค่ำ (19:00–23:59)</h3><div id="c-night" class="count">0 รายการ</div><div id="l-night" class="muted">— ว่าง —</div>
    </div>
  </div>
  <p class="muted">แสดงเฉพาะห้องและวันที่ที่เลือก • อัปเดตอัตโนมัติทุก 15 วินาที</p>
</section>

<fieldset>
  <legend>ข้อมูลผู้จอง</legend>
  <label>ชื่อผู้จอง</label><input id="by" placeholder="จะเติมจาก LINE ให้อัตโนมัติ">
  <label>วัตถุประสงค์</label><textarea id="purpose" rows="2" placeholder="เช่น ประชุมโครงการ..."></textarea>
</fieldset>

<button id="book">ยืนยันการจอง</button>
<p id="msg" class="hint"></p>
<p><a href="my.html">ไปที่ “การจองของฉัน / ยกเลิก”</a></p>

<details><summary>DEBUG</summary><pre id="debug"></pre></details>

<!-- Popup -->
<div id="popup">
  <div id="popup-backdrop"></div>
  <div id="popup-card">
    <h3 id="popup-title">ไม่สามารถจองได้</h3>
    <p id="popup-msg">ช่วงเวลานี้ถูกจองแล้ว กรุณาเลือกเวลาอื่น</p>
    <button id="popup-ok">OK</button>
  </div>
</div>

<script>
/* your JS unchanged */
</script>
</body>
</html>
